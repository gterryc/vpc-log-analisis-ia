# Arquitectura de Detecci√≥n de Tr√°fico An√≥malo en AWS

## üèóÔ∏è Diagrama de Arquitectura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    VPC + EC2    ‚îÇ    ‚îÇ   VPC + EC2     ‚îÇ    ‚îÇ   Attack Box    ‚îÇ
‚îÇ   (Aplicaci√≥n)  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  (Simulaci√≥n)   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   (Simulador)   ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                      ‚îÇ                      ‚îÇ
          ‚ñº                      ‚ñº                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    VPC Flow Logs                               ‚îÇ
‚îÇ             (Captura todo el tr√°fico de red)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Amazon S3                                    ‚îÇ
‚îÇ           (Almacenamiento de Flow Logs)                        ‚îÇ
‚îÇ                Particionado por fecha                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 Amazon Athena                                  ‚îÇ
‚îÇ        (An√°lisis y consultas SQL de los logs)                  ‚îÇ
‚îÇ    ‚Ä¢ Detecci√≥n de patrones an√≥malos                            ‚îÇ
‚îÇ    ‚Ä¢ Agregaciones por tiempo/IP/puerto                         ‚îÇ
‚îÇ    ‚Ä¢ Queries programadas                                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                AWS Lambda                                      ‚îÇ
‚îÇ           (Procesador de Anomal√≠as)                            ‚îÇ
‚îÇ    ‚Ä¢ Ejecuta queries de Athena                                 ‚îÇ
‚îÇ    ‚Ä¢ Procesa resultados                                        ‚îÇ
‚îÇ    ‚Ä¢ Invoca Bedrock para an√°lisis                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                Amazon Bedrock                                  ‚îÇ
‚îÇ              (IA Generativa)                                   ‚îÇ
‚îÇ    ‚Ä¢ Interpreta datos de tr√°fico                               ‚îÇ
‚îÇ    ‚Ä¢ Genera explicaciones claras                               ‚îÇ
‚îÇ    ‚Ä¢ Sugiere acciones correctivas                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                Amazon SNS                                      ‚îÇ
‚îÇ            (Sistema de Alertas)                                ‚îÇ
‚îÇ    ‚Ä¢ Notificaciones por email                                  ‚îÇ
‚îÇ    ‚Ä¢ Integraci√≥n con Slack/Teams                               ‚îÇ
‚îÇ    ‚Ä¢ Alertas estructuradas                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              CloudWatch Events                                ‚îÇ
‚îÇ            (Automatizaci√≥n)                                    ‚îÇ
‚îÇ    ‚Ä¢ Triggers programados                                      ‚îÇ
‚îÇ    ‚Ä¢ Monitoreo del sistema                                     ‚îÇ
‚îÇ    ‚Ä¢ M√©tricas de rendimiento                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß Componentes Principales

### 1. **Capa de Generaci√≥n de Datos**
- **VPC con EC2**: Instancias que generan tr√°fico normal
- **Simulador de Ataques**: Script que genera tr√°fico an√≥malo
- **VPC Flow Logs**: Captura autom√°tica de metadatos de red

### 2. **Capa de Almacenamiento**
- **S3 Bucket**: Almacena los Flow Logs con particionado por fecha
- **Estructura optimizada**: Para consultas eficientes en Athena

### 3. **Capa de An√°lisis**
- **Amazon Athena**: Motor de consultas SQL serverless
- **Glue Data Catalog**: Metadatos y esquemas
- **Queries de detecci√≥n**: Patrones predefinidos de anomal√≠as

### 4. **Capa de Procesamiento**
- **Lambda Functions**: Orquestaci√≥n y procesamiento
- **EventBridge**: Programaci√≥n de ejecuciones

### 5. **Capa de IA**
- **Amazon Bedrock**: Interpretaci√≥n inteligente de resultados
- **Modelos LLM**: Claude/Titan para generar explicaciones

### 6. **Capa de Alertas**
- **Amazon SNS**: Sistema de notificaciones
- **CloudWatch**: M√©tricas y dashboards

## üìã Paso a Paso de Implementaci√≥n

### **Fase 1: Configuraci√≥n Base de Red (15 min)**

#### 1.1 Crear VPC y Subnets
```hcl
# Variables principales
vpc_cidr = "10.0.0.0/16"
public_subnet_cidr = "10.0.1.0/24"
private_subnet_cidr = "10.0.2.0/24"
```

#### 1.2 Habilitar VPC Flow Logs
- Destino: S3 bucket
- Formato: Personalizado para optimizar an√°lisis
- Frecuencia: 1 minuto (para demo r√°pida)

#### 1.3 Desplegar instancias EC2
- **App Server**: Genera tr√°fico normal (nginx + script)
- **Attack Simulator**: Simula diferentes tipos de ataques

### **Fase 2: Configuraci√≥n de Almacenamiento (10 min)**

#### 2.1 Crear S3 Bucket
```bash
# Estructura del bucket
anomaly-detection-flowlogs-{random}/
‚îú‚îÄ‚îÄ year=2024/
‚îÇ   ‚îú‚îÄ‚îÄ month=01/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ day=15/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ hour=14/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ‚îî‚îÄ‚îÄ flow-logs-*.gz
```

#### 2.2 Configurar Lifecycle Policies
- Transici√≥n a IA despu√©s de 30 d√≠as
- Eliminaci√≥n despu√©s de 90 d√≠as

### **Fase 3: Configuraci√≥n de An√°lisis (20 min)**

#### 3.1 Crear tabla en Athena
```sql
CREATE EXTERNAL TABLE vpc_flow_logs (
  version int,
  account_id string,
  interface_id string,
  srcaddr string,
  dstaddr string,
  srcport int,
  dstport int,
  protocol int,
  packets bigint,
  bytes bigint,
  windowstart bigint,
  windowend bigint,
  action string
)
PARTITIONED BY (
  year string,
  month string,
  day string,
  hour string
)
STORED AS PARQUET
LOCATION 's3://your-bucket/partitioned-flow-logs/'
```

#### 3.2 Queries de Detecci√≥n de Anomal√≠as
```sql
-- 1. Port Scanning Detection
SELECT srcaddr, COUNT(DISTINCT dstport) as unique_ports
FROM vpc_flow_logs 
WHERE action = 'REJECT'
GROUP BY srcaddr
HAVING unique_ports > 100;

-- 2. DDoS Detection  
SELECT dstaddr, SUM(packets) as total_packets
FROM vpc_flow_logs
WHERE windowstart > unix_timestamp() - 300
GROUP BY dstaddr
HAVING total_packets > 100000;

-- 3. Data Exfiltration
SELECT srcaddr, SUM(bytes) as total_bytes
FROM vpc_flow_logs 
WHERE action = 'ACCEPT' AND srcport IN (80,443)
GROUP BY srcaddr
HAVING total_bytes > 1000000000;
```

### **Fase 4: Funci√≥n Lambda de Procesamiento (25 min)**

#### 4.1 Lambda para An√°lisis de Anomal√≠as
```python
import boto3
import json
from datetime import datetime, timedelta

def lambda_handler(event, context):
    # 1. Ejecutar queries de Athena
    # 2. Procesar resultados
    # 3. Invocar Bedrock si hay anomal√≠as
    # 4. Enviar alertas via SNS
    pass
```

#### 4.2 Integraci√≥n con Bedrock
```python
def analyze_with_bedrock(anomaly_data):
    prompt = f"""
    Analiza el siguiente tr√°fico de red an√≥malo y proporciona:
    1. Explicaci√≥n clara del problema
    2. Nivel de severidad (1-10)
    3. Acciones recomendadas
    4. Posible tipo de ataque
    
    Datos: {anomaly_data}
    """
    # Invocar modelo Claude en Bedrock
```

### **Fase 5: Sistema de Alertas (15 min)**

#### 5.1 Configurar SNS Topic
- Email notifications
- Formato estructurado de alertas
- Integraci√≥n con Slack (opcional)

#### 5.2 Template de Alerta
```json
{
  "timestamp": "2024-01-15T14:30:00Z",
  "severity": "HIGH",
  "anomaly_type": "Port Scanning",
  "source_ip": "203.0.113.5",
  "ai_analysis": "Detectado escaneo masivo de puertos...",
  "recommended_actions": ["Bloquear IP", "Revisar logs", "Verificar firewall"]
}
```

### **Fase 6: Automatizaci√≥n y Monitoreo (10 min)**

#### 6.1 EventBridge Rules
- Ejecuci√≥n cada 5 minutos
- Triggers basados en m√©tricas
- Recuperaci√≥n autom√°tica

#### 6.2 CloudWatch Dashboards
- M√©tricas de tr√°fico en tiempo real
- Estado de componentes
- Costos del sistema

## üíª Scripts de Simulaci√≥n para la Demo

### Simulador de Tr√°fico Normal
```bash
#!/bin/bash
# normal_traffic.sh
while true; do
  curl -s http://internal-app:80 > /dev/null
  sleep $((RANDOM % 10 + 1))
done
```

### Simulador de Port Scanning
```python
# port_scanner.py
import socket
import threading

def scan_port(target, port):
    try:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.settimeout(0.1)
        result = sock.connect_ex((target, port))
        sock.close()
    except:
        pass

target = "10.0.1.100"
for port in range(1, 65535):
    threading.Thread(target=scan_port, args=(target, port)).start()
```

### Simulador de DDoS
```bash
#!/bin/bash
# ddos_simulator.sh
target="10.0.1.100"
for i in {1..1000}; do
  (while true; do
    curl -s http://$target > /dev/null 2>&1
  done) &
done
```

## üìä M√©tricas y KPIs para la Demo

### M√©tricas T√©cnicas
- **Latencia de detecci√≥n**: < 5 minutos
- **Precisi√≥n de alertas**: > 95%
- **Costo por an√°lisis**: < $0.01 USD
- **Throughput**: 1M+ registros/hora

### M√©tricas de Negocio  
- **MTTR** (Mean Time To Response): < 2 minutos
- **Falsos positivos**: < 5%
- **Cobertura de amenazas**: 8 tipos diferentes

## üéØ Puntos Clave para la Presentaci√≥n

### **Demo Flow (20 minutos)**
1. **Mostrar tr√°fico normal** (2 min)
2. **Activar simulador de ataques** (3 min)
3. **Visualizar detecci√≥n en CloudWatch** (5 min)
4. **Mostrar an√°lisis de Bedrock** (5 min)  
5. **Recibir alerta y explicaci√≥n** (3 min)
6. **Discutir costos y escalabilidad** (2 min)

### **Ventajas Competitivas**
- ‚úÖ **Sin ML expertise requerida**
- ‚úÖ **Costo ultra bajo** (~$5-10/mes)
- ‚úÖ **Explicaciones humanas** via IA
- ‚úÖ **Escalamiento autom√°tico**
- ‚úÖ **Implementaci√≥n en < 2 horas**

### **Casos de Uso Reales**
- Detecci√≥n de intrusiones
- Compliance y auditor√≠a
- An√°lisis forense de incidentes
- Optimizaci√≥n de costos de red
- Monitoreo de aplicaciones cr√≠ticas

## üí° Tips para la Implementaci√≥n

1. **Usar regiones con Bedrock disponible** (us-east-1, us-west-2)
2. **Configurar l√≠mites de costo** en AWS Budgets
3. **Probar con datos sint√©ticos** primero
4. **Documentar todos los queries** de Athena
5. **Preparar rollback plan** para la demo

## üîÑ Pr√≥ximos Pasos Post-Demo

1. **Integraci√≥n con SIEM** existente
2. **ML customizado** para patrones espec√≠ficos  
3. **Respuesta autom√°tica** (bloqueo de IPs)
4. **Dashboard ejecutivo** con m√©tricas
5. **Multi-account** deployment

---

**Tiempo total estimado de implementaci√≥n: 95 minutos**  
**Costo mensual estimado: $8-15 USD**  
**Nivel de dificultad: Intermedio**