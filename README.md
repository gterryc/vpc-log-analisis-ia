# Arquitectura de Detecciรณn de Trรกfico Anรณmalo en AWS

## ๐๏ธ Diagrama de Arquitectura

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ    VPC + EC2    โ    โ   VPC + EC2     โ    โ   Attack Box    โ
โ   (Aplicaciรณn)  โโโโโโ  (Simulaciรณn)   โโโโโโ   (Simulador)   โ
โ                 โ    โ                 โ    โ                 โ
โโโโโโโโโโโฌโโโโโโโโ    โโโโโโโโโโโฌโโโโโโโโ    โโโโโโโโโโโฌโโโโโโโโ
          โ                      โ                      โ
          โผ                      โผ                      โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    VPC Flow Logs                               โ
โ             (Captura todo el trรกfico de red)                   โ
โโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                      โ
                      โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   Amazon S3                                    โ
โ           (Almacenamiento de Flow Logs)                        โ
โ                Particionado por fecha                          โ
โโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                      โ
                      โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                 Amazon Athena                                  โ
โ        (Anรกlisis y consultas SQL de los logs)                  โ
โ    โข Detecciรณn de patrones anรณmalos                            โ
โ    โข Agregaciones por tiempo/IP/puerto                         โ
โ    โข Queries programadas                                       โ
โโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                      โ
                      โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                AWS Lambda                                      โ
โ           (Procesador de Anomalรญas)                            โ
โ    โข Ejecuta queries de Athena                                 โ
โ    โข Procesa resultados                                        โ
โ    โข Invoca Bedrock para anรกlisis                              โ
โโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                      โ
                      โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                Amazon Bedrock                                  โ
โ              (IA Generativa)                                   โ
โ    โข Interpreta datos de trรกfico                               โ
โ    โข Genera explicaciones claras                               โ
โ    โข Sugiere acciones correctivas                              โ
โโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                      โ
                      โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                Amazon SNS                                      โ
โ            (Sistema de Alertas)                                โ
โ    โข Notificaciones por email                                  โ
โ    โข Integraciรณn con Slack/Teams                               โ
โ    โข Alertas estructuradas                                     โ
โโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                      โ
                      โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              CloudWatch Events                                โ
โ            (Automatizaciรณn)                                    โ
โ    โข Triggers programados                                      โ
โ    โข Monitoreo del sistema                                     โ
โ    โข Mรฉtricas de rendimiento                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ง Componentes Principales

### 1. **Capa de Generaciรณn de Datos**
- **VPC con EC2**: Instancias que generan trรกfico normal
- **Simulador de Ataques**: Script que genera trรกfico anรณmalo
- **VPC Flow Logs**: Captura automรกtica de metadatos de red

### 2. **Capa de Almacenamiento**
- **S3 Bucket**: Almacena los Flow Logs con particionado por fecha
- **Estructura optimizada**: Para consultas eficientes en Athena

### 3. **Capa de Anรกlisis**
- **Amazon Athena**: Motor de consultas SQL serverless
- **Glue Data Catalog**: Metadatos y esquemas
- **Queries de detecciรณn**: Patrones predefinidos de anomalรญas

### 4. **Capa de Procesamiento**
- **Lambda Functions**: Orquestaciรณn y procesamiento
- **EventBridge**: Programaciรณn de ejecuciones

### 5. **Capa de IA**
- **Amazon Bedrock**: Interpretaciรณn inteligente de resultados
- **Modelos LLM**: Claude/Titan para generar explicaciones

### 6. **Capa de Alertas**
- **Amazon SNS**: Sistema de notificaciones
- **CloudWatch**: Mรฉtricas y dashboards

---


<!-- BEGIN_TF_DOCS -->
#### Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | >= 1.10.0 |
| <a name="requirement_aws"></a> [aws](#requirement_aws) | >=5.0.0 |

#### Providers

No providers.

#### Resources

No resources.

#### Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_aws_region"></a> [aws_region](#input_aws_region) | AWS region | `string` | `"us-east-1"` | no |

#### Outputs

No outputs.
<!-- END_TF_DOCS -->